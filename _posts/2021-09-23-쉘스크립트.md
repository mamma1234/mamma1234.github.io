---
layout: post
title: "쉡스크립트"
description: 
headline: 
modified: 2021-09-23
category: webdevelopment
imagefeature: cover3.jpg
tags: [쉡스크립트,Shell script]
mathjax: 
chart: 
share: true
comments: true
featured: true
disqus:
---

# Record
## 개념
- Shell script

## 목차
- [작성시작](#작성시작)
- [실행](#실행)
- [주석](#주석)
- [입력/출력](#입력/출력)
- [변수](#변수)
- [특수문자](#특수문자)
- [변수 값의 치환](#변수-값의-치환)
- [배열](#배열)



### 샘플
- 
```JavaScript
```

### 작성시작
- 시스템에 지금부터 셸 스크립트를 쓴다는 사실을 알려주기 위함
```JavaScript
#!/bin/sh
```

### 실행
- 

```JavaScript
$ chmod 755 test.sh 
$ ./test.sh

$ sh test.sh

$ bash test.sh
```

### 주석
- 

```JavaScript
# 주석
```

### 입력/출력
- 

```JavaScript
#!/bin/sh 
read NAME 
echo "Hello, $NAME!"
```

- Bash에서는 -e플래그로 특수 텍스트를 이스케이프할 수 있다.

```JavaScript
#!/bin/bash 
echo -e "Hello\n$NAME!" #개행된다.

```

### 변수
- 변수의 이름으로써 영문자, 숫자 그리고 언더바가 사용된다.
- 변수에 값을 전달할 때는 = 의 앞,뒤에 공백 없이 작성한다. 문자열인 경우 "(쌍따옴표)로 감싼다.
- 변수에 액세스할 때 변수명의 앞에 $를 넣는다. 혹은 $넣어서 변수를 {}로 감싼다.
- 하나의 변수에 한 개의 값만 보존된다.
- 변수의 값이 덮어 쓰기되는 것을 방지하기 위해서는 readonly를 사용한다.
- 변수를 unset으로 삭제할 수 있다 (그러나 readonly변수를 삭제하는 것을 불가능하다). 

```JavaScript
#!/bin/sh

var="변수1"
VaR_2="변수2"
echo "Var_2=$VaR_2"

VaR_2="VaR_2가 변경됐다"
echo ${VaR_2}

readonly var
var="readonly var를 바꿔보자"

--------------------------

$ ./test.sh
Var_2=변수2
VaR_2가 변경됐다.
shell.sh: line 11: var: readonly variable

```

#### 특수변수

| 변수 | 기능 | 
| $0 | 스크립트명 | 
| $1 ~ $9 | 인수, 첫 번째의 인수는 $1, 2번째 인수는 $2로 액세스 | 
| $# | 스크립트에 전달된 인수의 수  | 
| $* | 모든 인수를 모아 하나로 처리 $@ 모든 인수를 각각 처리  | 
| $? | 직전에 실행한 커맨드의 종료 값(0은 성공, 1은 실패)  | 
| $$ | 이 쉘 스크립트의 프로세스 ID  | 
| $! | 마지막으로 실행한 백그라운드 프로세스 ID | 

```JavaScript
echo "\$0（스크립트 명）: $0"
echo "\$1（1번째 인수）: $1"
echo "\$2（2번째 인수）: $2"
echo "\$#（인수의 수）: $#"
echo "\"\$*\": \"$*\""
echo "\"\$@\": \"$@\""
VAR="exit값은0이 될 것이다."
echo $?

--------------------------

$ ./test.sh first second 3rd
$0（스크립트 명）: test.sh
$1（1번째 인수）: first
$2（2번째 인수）: second
$3（3번째 인수）: 3rd
$#（인수의 수）: 3
"$*": "first second third"
"$@": "first second third"
0
```

### 특수문자
- ? [ ' " ` \ $ ; & ( ) | ~ < > # % = 스페이트 탭 개행는 쉘 스크립트의 특수 문자이다. 문자열로써 사용할 때는 \를 앞에 쓴 다음에 쓴다.


### 변수 값의 치환
-

| 문법	| 설명 | 
| ${var} | 변수 값을 바꿔 넣는다.  | 
| ${var:-word}	| 변수가 아직 세팅되지 않거나 공백 문자열의 경우 word를 반환한다. var에는 저장되지 않는다. | 
| ${var:=word}	| 변수가 아직 세팅되지 않거나 공백 문자열의 word를 반환한다. var에 저장된다. |
| ${var:?word}	| 변수가 아직 세팅되지 않거나 공백 문자열의 경우 치환에 실패하고, 스탠다드 에러에 에러가 표시된다. |
| ${var:+word}	| 변수가 세팅되지 않은 경우 word가 반환된다. var에는 저장되지 않는다.  |

```JavaScript

#!/bin/sh

echo "1 - ${var:-wordSetInEcho1}"
echo "2 - var = ${var}"
echo "3 - ${var:=wordSetInEcho3}"
echo "4 - var = ${var}"
unset var
echo "5 - ${var:+wordSetInEcho5}"
echo "6 - var = $var"
var="newVarValue"
echo "7 - ${var:+wordSetInEcho7}"
echo "8 - var = $var"
echo "9 - ${var:?StandardErrorMessage}"
echo "10 - var = ${var}"

--------------------------

1 - wordSetInEcho1
2 - var = 
3 - wordSetInEcho3
4 - var = wordSetInEcho3
5 - 
6 - var = 
7 - wordSetInEcho7
8 - var = newVarValue
9 - newVarValue
10 - var = newVarValue

```



### 배열 (Bash)
- 
```JavaScript
```



### dos2unix

### forEach
- thisArg 매개변수(this)를 forEach()에 제공했기에, callback은 전달받은 this의 값을 자신의 this 값으로 사용할 수 있습니다. 
    - arr.forEach(callback(currentvalue[, index[, array]])[, thisArg])
```JavaScript
fruits.forEach((fruit) => console.log(fruit, second), second);
```



```JavaScript

// Q9. compute students' average score
{
  const result = students.reduce((prev, curr) => prev.score + curr.score);
  console.log(result / students.length);
}


// Q10. make a string containing all the scores
// result should be: '45, 80, 90, 66, 88'
{
  const result = students
    .map((student) => student.score)
    .filter((score) => score >= 50)
    .join();
  console.log(result);
}

// Bonus! do Q10 sorted in ascending order
// result should be: '45, 66, 80, 88, 90'
{
  const result = students
    .map((student) => student.score)
    .sort((a, b) => b - a)
    .join();
  console.log(result);
}
```