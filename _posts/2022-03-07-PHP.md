---
layout: post
title: "PHP"
description: 
headline: 
modified: 2022-03-07
category: webdevelopment
imagefeature: cover3.jpg
tags: [PHP]
mathjax: 
chart: 
share: true
comments: true
featured: true
disqus:
---

# Record

## 목차
- [변수](#변수)
- [상수](#상수)
- [타입](#타입)
- [연산자](#연산자)
- [제어문](#제어문)
- [배열](#배열)
- [함수](#함수)
- [내장함수](#내장함수)


## 개념
- 

## 동작원리
 - php파일의 확장자는 .php
 - 클라이언트가 브라우저를 통해 서버에게 php파일을 요청한다. 그러면 웹서버는 php파일을 뱉어낸다.
 - 이 때, 클라이언트는 php소스는 볼 수 없고, php파일은 html파일로 변환되어 브라우저에서 보여진다.
 - 웹 서버는 웹 페이지의 요청을 받아들여 php스크립트를 구동하고 html을 반환한다.



## 변수
 - PHP에서는 달러($) 기호를 사용하여 다음과 같이 변수를 선언합니다.
 - gettype() 함수는 인수로 전달받은 데이터의 타입을 출력하는 함수입니다.
 - 기본값으로 자동 초기화됩니다
 - 지역변수, 전역변수, 정적변수
    - 함수 밖에서 선언된 변수를 함수 내부에서 접근하고자 할 때는 global 키워드를 함께 사용해야 합니다.
```JavaScript
        global $var; // 함수 내에서 사용할 전역 변수를 명시함
```
    - PHP는 모든 전역 변수를 $GLOBALS 배열에 저장합니다.
```JavaScript    
        echo "함수 내부에서 호출한 전역 변수 var의 값은 {$var}입니다.<br>";
        echo "함수 내부에서 호출한 전역 변수 var의 값은 {$GLOBALS['var']}입니다.<br>";
```
    - PHP 슈퍼 글로벌 
        1. $GLOBALS
        2. $_SERVER
        3. $_GET
        4. $_POST
        5. $_FILES
        6. $_COOKIE
        7. $_SESSION
        8. $_REQUEST
        9. $_ENV

## 상수
```JavaScript
    define("PHP", "PHP 수업에 잘 오셨습니다!<br>"); // 대소문자를 구분함.(기본 설정)
    define("PHP", "<br>PHP 수업에 잘 오셨습니다!", true); // 대소문자를 구분하지 않음.
```

 - 마법상수
```JavaScript
__LINE__ 파일의 현재 줄 번호를 반환함.
__FILE__ 파일의 전체 경로와 이름을 반환함. include 내부에서 사용할 경우 include된 파일명을 반환함.
__DIR__	파일의 디렉터리를 반환함. 포함한 파일 안에서 사용할 경우 포함된 파일의 디렉터리를 반환함. dirname(__FILE__)과 같은 결과를 반환함.
__FUNCTION__ 함수의 이름을 반환함.
__CLASS__ 클래스의 이름을 반환함. 클래스 이름은 대소문자를 구분함.
__TRAIT__ 트레이트(trait)의 이름을 반환함. 트레이트의 이름은 트레이트를 선언한 네임스페이스를 포함함.
__METHOD__ 클래스의 메소드 이름을 반환함.
__NAMESPACE__ 현재 네임스페이스의 이름을 반환함.
```

## 타입
### 기본타입
 - 1. 불리언(boolean)
 - 2. 정수(integer)
 - 3. 실수(float)
 - 4. 문자열(string)
 - 5. 배열(array)
 - 6. 객체(object)
 - 7. 리소스(resource)
 - 8. NULL
    - NULL은 오직 한 가지 값(NULL 상수)만을 가질 수 있는 특별한 타입입니다.
    - NULL 타입의 변수란 아직 어떠한 값도 대입되지 않은 변수를 의미합니다.

### 타입변환
- 자동 타입 변환
- 강제 타입 변환
- 가변 변수
```JavaScript
echo $PHP;       // HTML
echo $$PHP;      // $HTML -> CSS
echo $$$PHP;     // $$HTML -> $CSS -> JavaScript
```


## 연산자
### 산술 연산자
### 대입 연산자
### 증감 연산자
### 비교 연산자
### 논리 연산자
### 비트 연산자
### 기타 연산자
    - 문자열 연산자(string operator)
        - PHP에서 문자열 연산자(.)를 사용하여 문자열을 연결할 수 있습니다.
        - 또한, echo() 함수에서는 쉼표 연산자(,)를 이용하여 문자열을 연결할 수 있습니다.
    - 배열 합집합 연산자(array union operator)
        - 배열 합집합 연산자(+)는 피연산자로 오는 두 배열의 합집합을 반환합니다.
    - instanceof 연산자
        - 1. 해당 변수가 어떤 클래스(class)에서 생성된 객체(object)인지를 확인할 때
        - 2. 해당 변수가 부모 클래스(parent class)에서 상속받은 클래스인지를 확인할 때
        - 3. 해당 변수가 클래스의 인스턴스(instance)인지 아닌지를 확인할 때
        - 4. 해당 변수가 인터페이스(interface)로 구현한 클래스의 객체 인스턴스(object instance)인지 아닌지를 확인할 때

## 제어문
### 조건문
### 반복문
```JavaScript
$arr = array(2, 4, 6, 8);
foreach ($arr as $value) {
    echo "변수 \$value의 현재값은 {$value}입니다.<br>";
}
unset($value);

* 위의 예제에서 변수 $value는 foreach 문 내에서만 사용하는 변수입니다.
따라서 foreach 문이 끝난 뒤에는 unset() 함수를 사용하여 해제해 주는 것이 좋습니다.

$arr = array(
    "둘" => 2,
    "넷" => 4,
    "여섯" => 6,
    "여덟" => 8,
);
foreach ($arr as $key => $value) {
    echo "배열 \$arr에서 키값 '{$key}'에 대한 값은 {$value}입니다.<br>";
}
unset($value);
```

### 기타 제어문
 - continue
    * switch 문에도 continue를 사용할 수 있어, switch 문을 반복문처럼 사용할 수 있습니다.
 - break
 - goto
    *  현재는 거의 사용하지 않습니다.
 - 제어문의 대체 문법
    - 대체 문법의 사용 방법은 우선 제어문의 여는 괄호({)를 콜론(:)으로 대체합니다. 그리고 닫는 괄호(})를 각각 endif;, endswitch;, endwhile;, endfor;, endforeach;로 대체하면 됩니다.
```JavaScript
    <?php $var = 5; ?>
    <?php if ($var > 6): ?>
    변수의 값은 6보다 큽니다.   <!-- 이 부분은 HTML 구문임 -->
    <?php elseif ($var == 6): ?>
    변수의 값은 6입니다.        <!-- 이 부분은 HTML 구문임 -->
    <?php elseif ($var < 6): ?>
    변수의 값은 6보다 작습니다. <!-- 이 부분은 HTML 구문임 -->
    <?php endif; ?>
```

## 배열
### 배열 요소의 추가
- 배열 요소의 인덱스를 생략할 수 있는데, 이 경우에는 인덱스가 0부터 시작하여 1씩 증가하며 순서대로 저장됩니다.
```JavaScript
$arr[] = "apple";  // 배열 인덱스를 생략하여, 순서대로 배열에 추가됨.
$arr[] = "banana";
$arr[] = "orange";
```

### 배열의 홀(hole)
- PHP에서는 배열의 특정 인덱스에만 배열 요소를 추가할 수 있습니다.

```JavaScript
$arr = array();            // 배열의 생성
$arr[10] = "banana";       // 인덱스 10에만 배열 요소를 추가함.

var_dump($arr);
var_dump($arr[0]);         // NULL
var_dump(isset($arr[0]));  // false
var_dump(isset($arr[10])); // true
```
* isset() 함수는 인수로 전달받은 변수가 초기화되어 있는지를 확인해 줍니다.

### 루프를 이용한 배열로의 접근
- count() 함수는 배열의 모든 요소의 개수를 반환하는 함수입니다.
- count() 함수는 배열 요소의 개수를 계산할 때 배열의 홀(hole)을 포함하지 않습니다.
    홀을 가지는 배열에서는 정확한 배열의 길이를 구할 수 없습니다.
    하지만 foreach 문을 사용하면 예제와 같이 홀이 아닌 배열 요소에만 정확히 접근할 수 있습니다.

### 연관 배열(associative array)
- PHP에서는 숫자뿐만 아니라 문자열도 배열 요소의 인덱스로 사용할 수 있습니다.

```JavaScript
$array = array();        // 배열 생성
$array["apple"] = 1000;  // 연관 배열 요소 추가
$array["banana"] = 2000; 
$array["orange"] = 1500;

$array = array("apple" => 1000, "banana" => 2000, "orange" => 1500);
```

- 만약 해당 배열이 존재하지 않으면, 해당 이름으로 새로운 배열을 만든 후에 배열 요소를 추가합니다.
```JavaScript
$array["apple"] = 1000;  // 배열이 존재하지 않으므로, 먼저 배열을 생성한 후에 요소가 추가됨.
$array["banana"] = 2000;
$array["orange"] = 1500;
echo $array["apple"].", ".$array["banana"].", ".$array["orange"];
```

- each() 함수는 배열 커서(array cursor)가 현재 가리키고 있는 배열 요소를 반환하고, 다음 배열 요소를 가리키도록 합니다. 이 함수는 가리키는 요소의 다음 요소가 배열의 마지막 요소라면 더는 동작하지 않습니다.

```JavaScript
$array = array("apple" => 1000, "banana" => 2000, "orange" => 1500);

while($element = each($array)) {
    echo $element['key']." ".$element['value']."<br>";
}
```

## 함수

### 함수의 값 반환
- PHP 7부터는 함수의 반환값을 원하는 타입으로 반환받을 수 있도록, 반환값의 타입을 직접 지정할 수 있습니다.

```JavaScript
function sum($x, $y) : float // 반환값의 타입을 float 타입으로 설정함.
{
    return $x + $y;
}

...

var_dump(sum(3 + 4)); // float
```

- strict 모드에서는 해당 위치에 나올 수 있는 적절한 타입 이외의 값이 나올 경우 타입 변환을 하지 않고 오류를 발생시킵니다.

```JavaScript
declare(strict_types = 1);   // strict 모드로 설정함.

function sum($x, $y) : float // 반환값의 타입을 float 타입으로 설정함.
{
    return $x + $y;
}

...

① var_dump(sum(3 + 4));   // 오류가 발생함.
② var_dump(sum(3 + 4.5)); // float
```

### 매개변수의 전달 방식
- 값 전달(passing by value)
```JavaScript
function increment($para)
{
    $para++; // $value의 값을 복사하여 increment() 함수에 인수로 전달함.
}
$value = 1;
increment($value);
```

- 참조 전달(passing by reference)
```JavaScript
function increment(&$para) // 인수로 전달되는 값의 원본을 참조함.
{
    $para++;
}
$value = 1;
increment($value);
```

### 디폴트 매개변수(default parameter)
- 디폴트 매개변수란 함수를 호출할 때 명시된 매개변수를 전달하지 않았을 경우에 사용하게 될 기본값을 의미합니다.
- PHP에서 함수를 호출할 때 전달된 인수는 매개변수의 왼쪽부터 차례대로 대입됩니다.
```JavaScript
function sum($value1, $value2 = 0, $value3 = 0)
{
    return $value1 + $value2 + $value3;
}
```

### 가변 길이 인수 목록(variable-length argument list)
- PHP 5.6 이상부터는 위의 예제처럼 '...' 토큰을 사용하여 함수가 호출될 때 전달받은 인수들을 배열 형태로 저장할 수 있습니다.

```JavaScript
function sum(...$num) // PHP 5.6 이상
{
    $sum = 0;
    foreach($num as $n) {
        $sum += $n;
    }
    return $sum;
}
```

### 가변 함수(variable function)
- PHP에서는 변수 이름에 괄호(())를 붙이면, 해당 변수의 값과 같은 이름을 가지는 함수를 호출합니다.

```JavaScript
function first()
{
    echo "first() 함수입니다.<br><br>";
}
function second($para)
{
    echo "second() 함수입니다.<br>";

    echo "함수 호출 시 전달받은 인수의 값은 {$para}입니다.";
}
$func = "first";
$func();    // first() 함수를 호출함.
$func = "second"
$func(20);  // second() 함수를 호출함.
```

## 내장함수

### 변수의 타입 변경

- is_array(), is_bool(), is_callable(), is_float(), is_double(), is_real(), 
    is_int(), is_integer(), is_long(), is_null(), is_numeric(), is_object(), 
    is_resource(),is_scalar(), is_string()

- settype($x, "string") 함수를 사용하면 전달받은 변수의 타입을 변경할 수 있습니다.

- isset() 함수는 전달받은 변수가 선언되어 있는지를 검사

- unset() 함수는 전달받은 변수를 제거합니다.

- empty() 함수는 전달받은 변수가 비어있는지를 검사합니다.
    - PHP에서는 다음과 같은 값을 가지는 변수를 비어있다고 인식합니다.
        - 정수 0
        - 실수 0.0
        - 문자열 "0"
        - 빈 문자열 ""
        - null
        - false
        - 빈 배열 array()
        - 초기화되지 않은 변수

```JavaScript
$var;
var_dump(isset($var)); // false
var_dump(empty($var)); // true

$var = 5;
var_dump(isset($var)); // true
var_dump(empty($var)); // false

$var = 0;
var_dump(isset($var)); // true
var_dump(empty($var)); // true

unset($var);
var_dump(isset($var)); // false
var_dump(empty($var)); // true
```

- 특정 타입으로 변경 intval(), floatval(), strval()

```JavaScript
$x = "123.56789abc";
echo intval($x);   // 123
echo floatval($x); // 123.56789
echo strval($x);   // 123.56789abc
```

### 배열 관련 함수
- array() 
- count(), sizeof() 
- array_count_values() 함수는 전달받은 배열의 배열 요소 값을 모두 확인하여, 해당 값이 몇 번 등장하는지를 확인합니다.

```JavaScript
$arr = array(1, 5, 7, 3, 3, 1, 2);
$acv = array_count_values($arr);                 // 1 : 2번, 5 : 1번, 7 : 1번, 3 : 2번, 2 : 1번
```

- current() 함수와 pos() 함수는 배열 포인터가 현재 가리키고 있는 요소를 반환합니다.
- next() 함수는 우선 배열 포인터를 앞으로 하나 이동시킨 후에, 해당 요소를 반환합니다.
- prev() 함수는 next() 함수와는 반대로 우선 배열 포인터를 뒤로 하나 이동시킨 후에, 해당 요소를 반환합니다.
- each() 함수는 배열 포인터가 현재 가리키고 있는 요소의 키와 값을 연관 배열로 반환하고, 배열 포인터를 앞으로 하나 이동시킵니다.
- reset() 함수는 배열 포인터가 첫 번째 배열 요소를 가리키도록 한 뒤에, 해당 요소의 값을 반환합니다.
- end() 함수는 reset() 함수와는 반대로 배열 포인터가 마지막 배열 요소를 가리키도록 한 뒤에, 해당 요소의 값을 반환합니다.

```JavaScript
$arr = array(2, 3, 7, 4, 6);

$element = current($arr);  // 배열의 첫 번째 요소를 가리킴.
while($element) {          // 배열의 마지막 요소까지
    echo $element;         // 해당 요소의 값을 출력하고,
    $element = next($arr); // 다음 요소를 가리킨 후에 해당 요소를 반환함.
}                          // 2, 3, 7, 4, 6


$element = end($arr);      // 배열의 마지막 요소를 가리킴.
while($element) {          // 배열의 첫 번째 요소까지
    echo $element;         // 해당 요소의 값을 출력하고,
    $element = prev($arr); // 이전 요소를 가리킨 후에 해당 요소를 반환함.
}     
```

### 배열의 정렬
- sort() 함수는 배열 요소들을 정렬 기준에 맞게 정렬합니다.
    - SORT_NUMERIC은 배열 요소를 숫자로 비교하며, SORT_STRING은 문자열로 비교하게 됩니다.
- ksort() 함수는 각 요소의 키를 기준으로 정렬합니다.
- asort() 함수는 각 요소의 값을 기준으로 정렬합니다.
- array_multisort(), natcasesort(), natsort(), usort(), uksort(), uasort()

### 배열 요소의 재배치
- shuffle() 함수는 배열 요소를 섞은 뒤에 무작위로 재배치합니다. 
- array_reverse() 함수는 전달받은 배열의 순서를 역순으로 변경한 새로운 배열을 반환합니다.


### 문자열 함수
- strlen() : strlen() 함수에 영문자만이 아닌 한글이 포함된 문자열이 전달되면, 문자열의 길이가 아닌 문자열의 총 바이트(byte) 수를 반환합니다
- mb_strlen() : 함수는 문자열뿐만 아니라 두 번째 인수로 인코딩 방식까지 전달받을 수 있습니다 // echo mb_strlen($str, "UTF-8"); // 7
- strcmp() 함수는 전달받은 두 개의 문자열을 서로 비교합니다
- strncasecmp()함수를 사용하면 대소문자를 구분하지 않고 두 개의 문자열을 비교할 수 있습니다.
- strnatcmp() 함수와 strnatcasecmp() 함수는 영숫자 순(natural ordering)으로 문자열을 비교한다
    - strcmp() 함수는 "2"를 "10"보다 크다고 인식하지만, strnatcmp() 함수에서는 작다고 인식합니다.
- strstr()함수와 strchr() 함수는 해당 문자열에서 전달받은 문자열과 처음으로 일치하는 부분을 찾습니다.
- strrchr() 함수는 해당 문자열에서 전달받은 문자열과 마지막으로 일치하는 부분을 찾습니다.
- stristr() 함수는 대소문자를 구분하지 않고 strstr() 함수와 같은 동작을 수행합니다.
- strpos() 함수는 해당 문자열에서 전달받은 문자열과 처음으로 일치하는 부분의 시작 인덱스를 반환합니다.
- strrpos() 함수는 해당 문자열에서 전달받은 문자열과 마지막으로 일치하는 부분의 시작 인덱스를 반환합니다.
- substr() 함수는 해당 문자열에서 특정 인덱스부터 전달받은 길이만큼의 일부분을 추출하여 반환합니다.
- strtolower() 함수는 전달받은 문자열의 모든 문자를 소문자로 바꿔줍니다.
- strtoupper() 함수는 전달받은 문자열의 모든 문자를 대문자로 바꿔줍니다.
- ucfirst 함수()는 전달받은 문자열의 첫 번째 문자만을 대문자로 바꿔줍니다.
- ucwords() 함수는 전달받은 문자열에서 단어별로 첫 번째 문자만을 대문자로 바꿔줍니다.
- explode() 함수는 특정 문자를 기준으로 전달받은 문자열을 나누어서 하나의 배열로 반환합니다.
- implode() 함수와 join() 함수는 전달받은 배열의 각 요소를 특정 문자를 사용하여 하나로 합쳐친 문자열로 반환합니다.
- strtok() 함수는 전달받은 문자열을 특정 문자를 기준으로 토큰화합니다.

```JavaScript
$token = strtok($str2, '!');  // '!'를 기준으로 토큰화
echo $token;                  // hello
while($token != ""){          // 문자열이 끝날 때까지
    $token = strtok('!');     // '!'를 기준으로 토근화하고 출력함.
    echo $token;              // beautiful, world
}
````

- str_replace() 함수는 해당 문자열에서 전달받은 문자열을 모두 찾은 후에, 찾은 문자열을 대체 문자열로 교체합니다.
- substr_replace() 함수는 해당 문자열에서 특정 위치의 문자들을 대체 문자열로 교체합니다.
- ltrim() 함수는 문자열 앞부분에 있는 공백을 제거하고, rtrim() 함수와 chop() 함수는 문자열 끝부분에 있는 공백을 제거합니다.
- trim() 함수는 문자열의 처음과 끝부분에 있는 공백을 모두 제거합니다.
    - 띄어쓰기 " "
    - 탭 문자 "\t"
    - 줄 바꿈 문자 "\n", "\r"
    - 널 문자 "\0"
    - 수직 탭 문자 "\x0B"

 
### 날짜 함수
- date() 함수는 전달받은 형식에 맞춰 날짜와 시간 정보를 문자열로 반환합니다.
- mktime() 함수는 시, 분, 초, 월, 일, 연도를 인수로 전달받아서, 해당 날짜와 시간을 나타내는 타임스탬프(timestamp)를 반환합니다.
- time() 함수는 인수를 전달받지 않고, 현재 날짜와 시간에 대한 타임스탬프를 반환합니다.
- getdate() 함수는 인수로 전달받은 타임스탬프에 해당하는 정보를 연관 배열의 형태로 반환합니다.
- date_default_timezone_set() 함수는 해당 스크립트에서 사용되는 날짜와 시간에 관련된 모든 함수에서 사용될 타임 존을 설정합니다.
- checkdate() 함수는 전달받은 날짜의 유효성을 검사합니다.


### 수학 함수
- max() 함수는 전달받은 수 중에서 가장 큰 수를 반환하며, min() 함수는 가장 작은 수를 반환합니다.
- floor() 함수는 인수로 전달받은 값과 같거나 작은 수 중에서 가장 큰 정수를 반환합니다.
- ceil() 함수는 반대로 인수로 전달받은 값과 같거나 큰 수 중에서 가장 작은 정수를 반환합니다.
- round() 함수는 소수점에서의 반올림을 수행할 수 있습니다.
- pow() 함수는 전달받은 수의 거듭제곱을 반환합니다.
- exp() 함수는 인수로 지수를 전달받아, e의 거듭제곱을 계산하여 반환합니다.
- log() 함수는 전달받은 수의 자연로그 값을 계산하여 반환합니다.
- sin() 함수는 전달받은 수의 사인값을, cos() 함수는 코사인값을, tan() 함수는 탄젠트값을 반환합니다.
- abs() 함수는 전달받은 수의 절댓값을 반환합니다.
- rand() 함수는 0보다 크거나 같고 getrandmax() 함수의 반환값보다 작은 하나의 정수를 무작위로 생성하여 반환합니다.
    * getrandmax() 함수는 rand() 함수로 생성할 수 있는 정수의 최댓값을 나타냅니다.

